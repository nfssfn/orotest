"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2115],{22115:function(t,e,n){n.r(e),n.d(e,{DirectionsProvider:function(){return u}});var i=n(85893),s=n(67294),o=n(89694),r=n(86145),a=n(32414),u=function(t){var e=t.children,n=(0,o._R)(),u=(0,a.j1)(),l=(0,s.useMemo)((function(){return new r.pQ(n,u)}),[n.id]);return(0,i.jsx)(r.Jb.Provider,{value:l,children:e})}},86145:function(t,e,n){n.d(e,{Jb:function(){return y},pQ:function(){return f},Kg:function(){return _}});var i=n(51438),s=n(52951),o=n(14924),r=n(70655),a=n(67294),u=n(68949),l=n(71462),d=n(74231),c=n(66136),h=n(20129),p=n(49385);var f=function(){function t(e,n){(0,i.Z)(this,t),(0,o.Z)(this,"Basis",null),(0,o.Z)(this,"globalState",null),(0,o.Z)(this,"formModel",null),(0,o.Z)(this,"__ds",null),(0,o.Z)(this,"__lastTs",Date.now()),(0,o.Z)(this,"cache",{}),(0,o.Z)(this,"isReady",!1),(0,o.Z)(this,"__dto",null),this.Basis=e,this.globalState=n,this.formModel=function(t){var e={destination:new h.N("destination",{initialValue:"",defaultValue:"",disabled:!1,readonly:!1,printer:function(t){return t},validators:[d.Z_().required("Destination is required")],type:"text",onChange:function(e){e&&t.compute()}}),directionType:new p.f("direction",{enum:[{icon:"car",label:"By car",value:"DRIVING"},{icon:"pedestrian",label:"By foot",value:"WALKING"},{icon:"bycicle",label:"By bike",value:"BICYCLING"},{icon:"train",label:"By public transport",value:"TRANSIT"}],initialEnumIndex:0,defaultEnumIndex:0,type:"radio",onChange:function(){t.compute()}})};return new c.a({controls:e})}(this),window.google&&this.setReady(!0),(0,u.rC)(this)}return(0,s.Z)(t,[{key:"setReady",value:function(t){this.isReady=!!t,this.__ds=new window.google.maps.DirectionsService}},{key:"dto",get:function(){return null===this.__dto?null:l.J.TIME_HOURS_MINS(this.__dto)}},{key:"setResult",value:function(t){this.__dto=t}},{key:"processResult",value:function(t){return t.routes[0].legs.reduce((function(t,e){return t+e.duration.value}),0)}},{key:"compute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this;if(this.formModel.controls.directionType.dirty||t){var n=this.formModel.getSnapshot(!1),i=this.cache[n.destination+n.direction];if(i)return this.setResult(this.processResult(i));var s=Date.now();this.__lastTs=s,this.__ds.route({origin:{lat:this.Basis.dto.address.lat,lng:this.Basis.dto.address.lon},destination:n.destination,travelMode:n.direction},(function(t){if(s===e.__lastTs){if("OK"!==t.status)return e.globalState.messages.push({type:"error",text:"We don't recognize that address. Please try another."}),e.setResult(null);e.cache[n.destination+n.direction]=t,e.setResult(e.processResult(t))}}))}}}]),t}();(0,r.gn)([u.LO],f.prototype,"isReady",void 0),(0,r.gn)([u.LO],f.prototype,"__dto",void 0),(0,r.gn)([u.aD,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0])],f.prototype,"setReady",null),(0,r.gn)([u.Fl,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[])],f.prototype,"dto",null),(0,r.gn)([u.aD,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0])],f.prototype,"setResult",null);var y=(0,a.createContext)(null);function _(){return(0,a.useContext)(y)}}}]);