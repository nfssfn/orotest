"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{50267:function(t,e,n){n.r(e),n.d(e,{TaxHistoryProvider:function(){return u}});var r=n(85893),i=n(67294),o=n(48207),a=n(9189),s=n(89694),u=function(t){var e=t.children,n=(0,a.c7)(),u=(0,s._R)().id,d=(0,i.useMemo)((function(){return new o.kr(u,n)}),[u]);return(0,r.jsx)(o.MH.Provider,{value:d,children:e})}},48207:function(t,e,n){n.d(e,{MH:function(){return b},kr:function(){return m},jw:function(){return T}});var r=n(47568),i=n(51438),o=n(52951),a=n(14924),s=n(10253),u=n(70655),d=n(34051),c=n.n(d),l=n(68949),p=n(67294),y=n(9669),f=n.n(y),h=n(87339),v=function(){function t(){(0,i.Z)(this,t)}return(0,o.Z)(t,[{key:"getTaxHistory",value:function(t){return f().post("/api/property/tax_history",t)}}]),t}();(0,u.gn)([(0,h.B)("ListingTaxHistory:getTaxHistory",[]),(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[void 0])],v.prototype,"getTaxHistory",null);var g=new v,x=n(68921),_=n(71462);function w(t){var e=x.lC.value.get()<x.lC.enum.sm,n=t.history,r={chart:{type:"line",data:{labels:n.map((function(t){return t.year})),datasets:[{label:"Property Tax",borderColor:"#6454C3",backgroundColor:"#6454C3",pointRadius:0,data:n.map((function(t){return t.tax}))}]},options:{interaction:{intersect:!1,mode:"index"},aspectRatio:e?1:3,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(t){return _.J.USD_INT(t)}}}},elements:{line:{tension:.4}},plugins:{legend:{display:!1},tooltip:{enabled:!0,position:"nearest",external:function(t){var e=t.tooltip;0!==e.opacity&&e.dataPoints&&e.dataPoints[0]?r.__index=e.dataPoints[0].dataIndex+1:r.__index=r.__maxyears||1}},datalabels:{display:!1}}}}};return r}function k(t){try{var e={id:t.prop_id,history:t.tax_history,plots:void 0};return e.plots=function(t){return{taxHistory:w(t)}}(e),e}catch(n){return null}}var m=function(){function t(e){(0,i.Z)(this,t),(0,a.Z)(this,"id",null),(0,a.Z)(this,"__dto",null),(0,a.Z)(this,"fetched",!1),(0,l.rC)(this),this.id=e}return(0,o.Z)(t,[{key:"init",value:function(e){var n=this;return(0,r.Z)(c().mark((function r(){var i,o;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(i=null===e||void 0===e?void 0:e.dto)||void 0===i){r.next=5;break}r.t0=i,r.next=8;break;case 5:return r.next=7,t.fetch(n.id);case 7:r.t0=r.sent;case 8:o=r.t0,n.setDTO(o),n.setFetched(!0);case 11:case"end":return r.stop()}}),r)})))()}},{key:"dto",get:function(){return null===this.__dto?null:k(this.__dto)}},{key:"hydraData",get:function(){return{dto:this.__dto}}},{key:"setDTO",value:function(t){this.__dto=t}},{key:"setFetched",value:function(t){this.fetched=t}}],[{key:"fetch",value:function(t){return(0,r.Z)(c().mark((function e(){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s.Z,e.next=3,g.getTaxHistory({prop_id:t});case 3:if(e.t1=e.sent,n=(0,e.t0)(e.t1,2),r=n[0],!(i=n[1])){e.next=9;break}throw i;case 9:return e.abrupt("return",r.data);case 10:case"end":return e.stop()}}),e)})))()}}]),t}();(0,u.gn)([l.LO],m.prototype,"__dto",void 0),(0,u.gn)([l.LO],m.prototype,"fetched",void 0),(0,u.gn)([l.Fl,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[])],m.prototype,"dto",null),(0,u.gn)([l.Fl,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[])],m.prototype,"hydraData",null),(0,u.gn)([l.aD,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[void 0])],m.prototype,"setDTO",null),(0,u.gn)([l.aD,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[void 0])],m.prototype,"setFetched",null);var b=(0,p.createContext)(null);function T(){return(0,p.useContext)(b)}}}]);