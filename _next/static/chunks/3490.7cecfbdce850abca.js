"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3490],{93490:function(t,e,n){n.r(e),n.d(e,{SimilarPropertiesProvider:function(){return u}});var r=n(85893),i=n(67294),s=n(92103),o=n(89694),u=function(t){var e=t.children,n=(0,o._R)(),u=n.id,a=(0,i.useMemo)((function(){return new s.aC(u,n)}),[u]);return(0,r.jsx)(s.gm.Provider,{value:a,children:e})}},92103:function(t,e,n){n.d(e,{gm:function(){return m},aC:function(){return _},Bf:function(){return k}});var r=n(47568),i=n(51438),s=n(52951),o=n(14924),u=n(10253),a=n(70655),p=n(34051),c=n.n(p),d=n(68949),l=n(67294),f=n(9669),h=n.n(f),v=n(87339),y=function(){function t(){(0,i.Z)(this,t)}return(0,s.Z)(t,[{key:"getSimilarProperties",value:function(t){return h().post("/api/property/similar",t)}}]),t}();(0,a.gn)([(0,v.B)("ListingSimilarProperties:getSimilarProperties",[]),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0])],y.prototype,"getSimilarProperties",null);var g=new y;var _=function(){function t(e,n){(0,i.Z)(this,t),(0,o.Z)(this,"id",null),(0,o.Z)(this,"Basis",null),(0,o.Z)(this,"__dto",null),(0,o.Z)(this,"fetched",!1),this.id=e,this.Basis=n,(0,d.rC)(this)}return(0,s.Z)(t,[{key:"init",value:function(e){var n=this;return(0,r.Z)(c().mark((function r(){var i,s;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.Basis.dto.is.offMarket){r.next=2;break}return r.abrupt("return");case 2:if(null===(i=null===e||void 0===e?void 0:e.dto)||void 0===i){r.next=7;break}r.t0=i,r.next=10;break;case 7:return r.next=9,t.similarProperties(n.id,n.Basis.pageType);case 9:r.t0=r.sent;case 10:s=r.t0,n.setDTO(s),n.setFetched(!0);case 13:case"end":return r.stop()}}),r)})))()}},{key:"dto",get:function(){return null===this.__dto?null:function(t){try{return t.properties.map((function(t){return{address:t.address,attributes:{beds:t.beds,baths:t.baths,"living-area":t.building_size},photo1:t.photo1,price:t.price,prop_id:t.prop_id}}))}catch(e){return null}}(this.__dto)}},{key:"hydraData",get:function(){return{dto:this.__dto}}},{key:"setDTO",value:function(t){this.__dto=t}},{key:"setFetched",value:function(t){this.fetched=t}}],[{key:"similarProperties",value:function(t,e){return(0,r.Z)(c().mark((function n(){var r,i,s,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="buy"===e?"sale":e,n.t0=u.Z,n.next=4,g.getSimilarProperties({prop_id:t,prop_class:r});case 4:if(n.t1=n.sent,i=(0,n.t0)(n.t1,2),s=i[0],404!==(null===(o=i[1])||void 0===o?void 0:o.code)){n.next=10;break}return n.abrupt("return",null);case 10:if(!o){n.next=12;break}throw o;case 12:return n.abrupt("return",s.data);case 13:case"end":return n.stop()}}),n)})))()}}]),t}();(0,a.gn)([d.LO],_.prototype,"__dto",void 0),(0,a.gn)([d.LO],_.prototype,"fetched",void 0),(0,a.gn)([d.Fl,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[])],_.prototype,"dto",null),(0,a.gn)([d.Fl,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[])],_.prototype,"hydraData",null),(0,a.gn)([d.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0])],_.prototype,"setDTO",null),(0,a.gn)([d.aD,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[void 0])],_.prototype,"setFetched",null);var m=(0,l.createContext)(null);function k(){return(0,l.useContext)(m)}}}]);