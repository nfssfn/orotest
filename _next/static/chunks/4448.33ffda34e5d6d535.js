"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4448],{24448:function(e,t,n){n.r(t),n.d(t,{AffordabilityProvider:function(){return u}});var r=n(85893),a=n(67294),i=n(89694),o=n(48353),u=function(e){var t=e.children,n=(0,i._R)(),u=n.id,s=(0,a.useMemo)((function(){return new o.cJ(u,n)}),[u]);return(0,r.jsx)(o.KE.Provider,{value:s,children:t})}},48353:function(e,t,n){n.d(t,{KE:function(){return F},cJ:function(){return V},Yt:function(){return E}});var r=n(47568),a=n(51438),i=n(52951),o=n(14924),u=n(26042),s=n(10253),l=n(70655),c=n(34051),p=n.n(c),d=n(68949),f=n(67294),y=n(9669),h=n.n(y),_=n(87339),m=function(){function e(){(0,a.Z)(this,e)}return(0,i.Z)(e,[{key:"getAffordability",value:function(e){return h().post("/api/property/affordability",e)}}]),e}();(0,l.gn)([(0,_.B)("ListingAffordability:getAffordability",[]),(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[void 0])],m.prototype,"getAffordability",null);var v=new m,w=n(66136),g=n(20129),x=n(49385),b=n(71462);function k(e,t){var n={};return n={price:new g.N("price",{initialValue:e.dto.data.price,defaultValue:e.dto.data.price,min:1,max:999999999,printer:function(e){return b.J.NUMBER(e)},validators:[],type:"number"}),downPaymentPercent:new g.N("down-payment-percent",{initialValue:.2,defaultValue:.2,min:.02,max:1,step:.01,printer:function(e){return b.J.PERCENT_VALUE(e)},subtype:"percent",type:"number"}),downPayment:new g.N("down-payment",{initialValue:.2*e.dto.data.price,defaultValue:.2*e.dto.data.price,min:(0,d.Fl)((function(){var e;return.02*((null===n||void 0===n||null===(e=n.price)||void 0===e?void 0:e.internalValue)||0)})),max:(0,d.Fl)((function(){var e;return(null===n||void 0===n||null===(e=n.price)||void 0===e?void 0:e.internalValue)||0})),printer:function(e){return b.J.NUMBER(e)},type:"number"}),interestRate:new g.N("interest-rate",{initialValue:.05,defaultValue:.05,min:0,max:.2,step:1e-4,printer:function(e){return b.J.PERCENT_VALUE(e)},validators:[function(){var e=(0,r.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<0)){e.next=2;break}throw new Error("Minimum value is 0");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,r.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>1)){e.next=2;break}throw new Error("Maximum value is 100");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()],subtype:"percent",type:"number"}),loanType:new x.f("loan-type",{enum:[{label:"15 Years Fixed",value:15},{label:"20 Years Fixed",value:20},{label:"30 Years Fixed",value:30}],initialEnumIndex:2,defaultEnumIndex:2,type:"select"}),propertyTaxes:new g.N("property-taxes",{initialValue:t.dto.propertyTaxes,defaultValue:t.dto.propertyTaxes,min:0,max:999999,printer:function(e){return b.J.NUMBER(e)},validators:[],type:"number"}),insurance:new g.N("insurance",{initialValue:t.dto.insurance,defaultValue:t.dto.insurance,min:0,max:999999,printer:function(e){return b.J.NUMBER(e)},validators:[],type:"number"}),hoaFees:new g.N("hoa-fees",{initialValue:t.dto.hoaFees,defaultValue:t.dto.hoaFees,min:0,max:999999,printer:function(e){return b.J.NUMBER(e)},validators:[],type:"number"})},new w.a({controls:n,onChange:function(){return setTimeout((function(){return t.recalculate()}),10)}})}var V=function(){function e(t,n){(0,a.Z)(this,e),(0,o.Z)(this,"id",null),(0,o.Z)(this,"Basis",null),(0,o.Z)(this,"formModel",null),(0,o.Z)(this,"__dto",null),(0,o.Z)(this,"fetched",!1),this.id=t,this.Basis=n,(0,d.rC)(this)}return(0,i.Z)(e,[{key:"init",value:function(t){var n=this;return(0,r.Z)(p().mark((function r(){var a,i;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.Basis.dto.is.offMarket){r.next=2;break}return r.abrupt("return");case 2:if(null===(a=null===t||void 0===t?void 0:t.dto)||void 0===a){r.next=7;break}r.t0=a,r.next=10;break;case 7:return r.next=9,e.fetch({prop_id:n.id});case 9:r.t0=r.sent;case 10:i=r.t0,n.setDTO(i),n.formModel=k(n.Basis,n),n.setFetched(!0);case 14:case"end":return r.stop()}}),r)})))()}},{key:"dto",get:function(){if(null===this.__dto)return null;try{var e=this.__dto.hoa_fees+this.__dto.insurance+this.__dto.interest_payment+this.__dto.prop_taxes,t=(e=this.__dto["mortgage insurance"]?e+this.__dto["mortgage insurance"]:e)/100;return{hoaFees:this.__dto.hoa_fees,hoaFeesPercent:this.__dto.hoa_fees/t,insurance:Math.floor(this.__dto.insurance),interestPayment:this.__dto.interest_payment,interestPaymentPercent:this.__dto.interest_payment/t,propertyTaxes:this.__dto.prop_taxes,propertyTaxesPercent:this.__dto.prop_taxes/t,mortgageInsurance:this.__dto["mortgage insurance"],mortgageInsurancePercent:this.__dto["mortgage insurance"]/t,pricePerMonth:e}}catch(n){return null}}},{key:"recalculate",value:function(){var t=this;return(0,r.Z)(p().mark((function n(){var r,a,i,o;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(r=t.Basis.dto)||void 0===r||null===(a=r.is)||void 0===a?void 0:a.hidden)){n.next=3;break}return n.abrupt("return");case 3:return s=t.formModel,i={down_payment:s.controls.downPaymentPercent.internalValue,price:s.controls.price.internalValue,interest_rate:s.controls.interestRate.internalValue,loan_type:s.controls.loanType.internalValue.value,prop_tax_est:s.controls.propertyTaxes.internalValue,monthly_insurance:s.controls.insurance.internalValue,monthly_hoa:s.controls.hoaFees.internalValue},n.next=6,e.fetch((0,u.Z)({prop_id:t.id},i));case 6:o=n.sent,t.setDTO(o);case 8:case"end":return n.stop()}var s}),n)})))()}},{key:"hydraData",get:function(){return{dto:this.__dto}}},{key:"setDTO",value:function(e){this.__dto=e}},{key:"setFetched",value:function(e){this.fetched=e}}],[{key:"fetch",value:function(e){return(0,r.Z)(p().mark((function t(){var n,r,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s.Z,t.next=3,v.getAffordability(e);case 3:if(t.t1=t.sent,n=(0,t.t0)(t.t1,2),r=n[0],!(a=n[1])){t.next=9;break}throw a;case 9:return t.abrupt("return",r.data);case 10:case"end":return t.stop()}}),t)})))()}}]),e}();(0,l.gn)([d.LO],V.prototype,"__dto",void 0),(0,l.gn)([d.LO],V.prototype,"fetched",void 0),(0,l.gn)([d.aD,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[void 0])],V.prototype,"init",null),(0,l.gn)([d.Fl,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[])],V.prototype,"dto",null),(0,l.gn)([d.aD,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[])],V.prototype,"recalculate",null),(0,l.gn)([d.Fl,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[])],V.prototype,"hydraData",null),(0,l.gn)([d.aD,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[void 0])],V.prototype,"setDTO",null),(0,l.gn)([d.aD,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[void 0])],V.prototype,"setFetched",null);var F=(0,f.createContext)(null);function E(){return(0,f.useContext)(F)}}}]);