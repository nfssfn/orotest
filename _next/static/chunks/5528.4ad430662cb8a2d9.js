"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5528],{85528:function(t,e,n){n.r(e),n.d(e,{PropertyHistoryProvider:function(){return s}});var r=n(85893),i=n(67294),o=n(31140),u=n(9189),a=n(89694),s=function(t){var e=t.children,n=(0,u.c7)(),s=(0,a._R)().id,c=(0,i.useMemo)((function(){return new o.iC(s,n)}),[s]);return(0,r.jsx)(o.kI.Provider,{value:c,children:e})}},31140:function(t,e,n){n.d(e,{kI:function(){return w},iC:function(){return v},_6:function(){return k}});var r=n(47568),i=n(51438),o=n(52951),u=n(14924),a=n(10253),s=n(70655),c=n(34051),p=n.n(c),d=n(68949),y=n(67294),f=n(9669),h=n.n(f),l=n(87339),_=function(){function t(){(0,i.Z)(this,t)}return(0,o.Z)(t,[{key:"getPropertyHistory",value:function(t){return h().post("/api/property/prop_history",t)}}]),t}();(0,s.gn)([(0,l.B)("ListingPropertyHistory:getPropertyHistory",[]),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0])],_.prototype,"getPropertyHistory",null);var g=new _,v=function(){function t(e){(0,i.Z)(this,t),(0,u.Z)(this,"id",null),(0,u.Z)(this,"__dto",null),(0,u.Z)(this,"fetched",!1),(0,d.rC)(this),this.id=e}return(0,o.Z)(t,[{key:"init",value:function(e){var n=this;return(0,r.Z)(p().mark((function r(){var i,o;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(i=null===e||void 0===e?void 0:e.dto)||void 0===i){r.next=5;break}r.t0=i,r.next=8;break;case 5:return r.next=7,t.fetch(n.id);case 7:r.t0=r.sent;case 8:o=r.t0,n.setDTO(o),n.setFetched(!0);case 11:case"end":return r.stop()}}),r)})))()}},{key:"dto",get:function(){if(null===this.__dto)return null;try{return{id:this.__dto.prop_id,history:this.__dto.prop_history.map((function(t){return{datasourceName:t.datasource_name,date:t.date,eventName:t.event_name,price:t.price,priceChanged:t.price_changed,priceRangeMax:t.price_range_max,priceRangeMin:t.price_range_min,source:t.source,sqft:t.sqft}}))}}catch(t){return null}}},{key:"hydraData",get:function(){return{dto:this.__dto}}},{key:"setDTO",value:function(t){this.__dto=t}},{key:"setFetched",value:function(t){this.fetched=t}}],[{key:"fetch",value:function(t){return(0,r.Z)(p().mark((function e(){var n,r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a.Z,e.next=3,g.getPropertyHistory({prop_id:t});case 3:if(e.t1=e.sent,n=(0,e.t0)(e.t1,2),r=n[0],!(i=n[1])){e.next=9;break}throw i;case 9:return e.abrupt("return",r.data);case 10:case"end":return e.stop()}}),e)})))()}}]),t}();(0,s.gn)([d.LO],v.prototype,"__dto",void 0),(0,s.gn)([d.LO],v.prototype,"fetched",void 0),(0,s.gn)([d.Fl,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[])],v.prototype,"dto",null),(0,s.gn)([d.Fl,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[])],v.prototype,"hydraData",null),(0,s.gn)([d.aD,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0])],v.prototype,"setDTO",null),(0,s.gn)([d.aD,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0])],v.prototype,"setFetched",null);var w=(0,y.createContext)(null);function k(){return(0,y.useContext)(w)}}}]);