"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6672],{6672:function(e,t,a){a.d(t,{lf:function(){return oe},w_:function(){return re},bM:function(){return ie},lc:function(){return le}});var n=a(47568),r=a(51438),o=a(52951),l=a(14924),i=a(10253),s=a(34051),d=a.n(s),u=a(67294),c=a(39156),p=a(70655),b=a(68949),g=a(9669),h=a.n(g),y=a(87339),m=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,[{key:"getRentEstimator",value:function(e){return h().post("/api/rent-analyzer",e)}}]),e}();(0,p.gn)([(0,y.B)("RentEstimatorBasis:getRentEstimator",[]),(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],m.prototype,"getRentEstimator",null);var f=new m,v=a(26042),_=a(69396),C=a(20129),w=a(49385),k=a(66136),R=[{label:"Address",value:"address",icon:"house-smaller"},{label:"ZIP Code",value:"zip",icon:"placemark"},{label:"City",value:"city",icon:"city"}],x=[{label:"3 mo",mobileLabel:3,value:3},{label:"6 mo",mobileLabel:6,value:6},{label:"9 mo",mobileLabel:9,value:9},{label:"12 mo",mobileLabel:12,value:12},{label:"18 mo",mobileLabel:18,value:18},{label:"24 mo",mobileLabel:24,value:24},{label:"36 mo",mobileLabel:36,value:36},{label:"48 mo",mobileLabel:48,value:48}],B=[{label:"Auto",value:"auto"},{label:"0.1 miles",mobileLabel:.1,value:.1},{label:"0.2 miles",mobileLabel:.2,value:.2},{label:"0.50 miles",mobileLabel:.5,value:.5},{label:"1 miles",mobileLabel:1,value:1},{label:"2 miles",mobileLabel:2,value:2},{label:"5 miles",mobileLabel:5,value:5},{label:"10 miles",mobileLabel:10,value:10}],E=[{label:"Any",value:"any"},{label:"Studio",value:0},{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:"5+",value:"5+"}],T=[{label:"Any",value:"any"},{label:1,value:1},{label:1.5,value:1.5},{label:2,value:2},{label:2.5,value:2.5},{label:3,value:3},{label:3.5,value:3.5},{label:"4+",value:"4+"}],D=[{label:"Any",value:"any"},{label:"Single Family",icon:"house",value:"house-duplex"},{label:"Condo",icon:"house-condo",value:"condo-apt"},{label:"Townhome",icon:"house-townhouse",value:"townhouse"}];function I(e){var t={type:e.controls.searchType.internalValue.value,query:e.controls.autocomplete.internalValue,distance:e.controls.distance.internalValue.value,beds:e.controls.beds.internalValue.value,baths:e.controls.baths.internalValue.value,prop_type3:e.controls.propType.internalValue.value,look_back:e.controls.lookBack.internalValue.value};return"address"===e.controls.searchType.internalValue.value?(0,_.Z)((0,v.Z)({},t),{building_size:e.controls.buildingSize.internalValue||0}):t}var N,Z,F=a(26140),P=a(70481),A=function(){function e(t){(0,r.Z)(this,e),(0,l.Z)(this,"__dto",null),(0,l.Z)(this,"infoWindowList",null),(0,l.Z)(this,"infoWindow",null),(0,l.Z)(this,"map",null),(0,l.Z)(this,"state",{busy:(0,F.M)(),fetched:!1}),(0,l.Z)(this,"RentEstimator",null),(0,l.Z)(this,"formModel",function(){var e={};return e={searchType:new w.f("radio-input-search",{enum:R,initialEnumIndex:0,defaultEnumIndex:0,disabled:!1,onChange:function(){e.distance.reset()},type:"radio"}),autocomplete:new C.N("autocomplete",{initialValue:"",defaultValue:"",type:(0,b.Fl)((function(){var t,a;return 1===(null===e||void 0===e||null===(t=e.searchType)||void 0===t||null===(a=t.rawValue)||void 0===a?void 0:a.$id)?"number":"text"}))}),lookBack:new w.f("select-look-back",{enum:x,initialEnumIndex:3,defaultEnumIndex:3,type:"radio"}),distance:new w.f("select-distance",{enum:B,initialEnumIndex:0,defaultEnumIndex:0,type:"radio"}),buildingSize:new C.N("building-size",{initialValue:"",defaultValue:"",min:0,type:"number"}),beds:new w.f("select-input-beds",{enum:E,initialEnumIndex:0,defaultEnumIndex:0,type:"radio"}),baths:new w.f("select-input-bath",{enum:T,initialEnumIndex:0,defaultEnumIndex:0,type:"radio"}),propType:new w.f("select-input-type",{enum:D,initialEnumIndex:0,defaultEnumIndex:0,type:"radio"})},new k.a({controls:e})}()),(0,b.rC)(this),this.RentEstimator=t}return(0,o.Z)(e,[{key:"init",value:function(e){var t=this;return(0,n.Z)(d().mark((function a(){var n;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(n=null===e||void 0===e?void 0:e.dto)&&(t.setDTO(n),t.setFetched(!0));case 2:case"end":return a.stop()}}),a)})))()}},{key:"getRentEstimator",value:function(t){var a=this;return(0,n.Z)(d().mark((function n(){var r,o,l,s,u,p,b;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(0,i.Z)(a.state.busy.lock(),2),o=r[0],l=r[1],!1!==o){n.next=3;break}return n.abrupt("return");case 3:return a.setFetched(!1),s=null!==t&&void 0!==t?t:I(a.formModel),n.t0=i.Z,n.next=8,(0,c.of)(e.fetch(s));case 8:if(n.t1=n.sent,u=(0,n.t0)(n.t1,2),p=u[0],b=u[1],l(),!b){n.next=16;break}throw a.setDTO(null),b;case 16:a.setDTO(p),a.setFetched(!0);case 18:case"end":return n.stop()}}),n)})))()}},{key:"dto",get:function(){return null===this.__dto?null:function(e){try{var t;return{address:{zip:e.address.zip_code,city:e.address.city,county:e.address.county,state:e.address.state_name,stateCode:e.address.state_id,country:e.address.country,aggType:e.address.place_type,lat:e.address.lat,lon:e.address.lon,formattedAddress:e.address.formatted_address},rent:{average:e.rent.average,median:e.rent.median,prediction:e.rent.prediction,percentile25:e.rent.percentile25,percentile75:e.rent.percentile75,min:e.rent.min,max:e.rent.max},stat:{qty:e.stat.qty,maxDist:e.stat.max_dist,monthLookback:e.stat.month_lookback},properties:null===(t=e.items)||void 0===t?void 0:t.map((function(e){return{stateId:e.state_id,zip:e.zip,address:e.address,location:{lat:parseFloat(e.location.slice(1,-1).split(",")[0]),lng:parseFloat(e.location.slice(1,-1).split(",")[1])},beds:e.beds,baths:e.baths,propType3:e.prop_type3,size:e.building_size,pricePerFt2:e.price_per_ft2,rent:e.price,type:e.type,distance:e.distance,closeDate:e.close_date}}))}}catch(a){return null}}(this.__dto)}},{key:"hydraData",get:function(){return{formModel:this.formModel,dto:this.__dto}}},{key:"boundaries",get:function(){return new window.google.maps.Circle({radius:1609.34*this.dto.stat.maxDist,center:{lat:this.dto.address.lat,lng:this.dto.address.lon}}).getBounds()}},{key:"markers",get:function(){var e,t,a=this;if(!(null===(e=this.dto)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.length))return null;var n={};this.dto.properties.forEach((function(e){var t,a=(0,P.B)(e.location.lat,e.location.lng);null!==(t=(N=n)[Z=a])&&void 0!==t||(N[Z]=[]),n[a].push(e)}));var r=Object.values(n).map((function(e){var t=a,n={lower:0,moderate:0,higher:0};e.forEach((function(e){n[e.type]++}));var r=Object.entries(n);return r.sort((function(e,t){return t[1]-e[1]})),{lat:e[0].location.lat,lng:e[0].location.lng,onClick:function(){t.infoWindow&&(t.setIwList(e),t.infoWindow.open(e[0].location.lat,e[0].location.lng))},id:(0,P.B)(e[0].location.lat,e[0].location.lng),iconName:("lower"===r[0][0]?"rent-estimator-marker-green-wo-shadow":"higher"===r[0][0]&&"rent-estimator-marker-red-wo-shadow")||"rent-estimator-marker-blue-wo-shadow"}}));return r.push({lat:this.dto.address.lat,lng:this.dto.address.lon,id:this.dto.address.lat,iconName:"house-smaller"}),r}},{key:"fitBounds",value:function(){this.map.fitBounds(this.boundaries)}},{key:"setMap",value:function(e){this.map=e,this.fitBounds()}},{key:"setIw",value:function(e){this.infoWindow=e}},{key:"setIwList",value:function(e){this.infoWindowList=e}},{key:"setDTO",value:function(e){this.__dto=e}},{key:"setFetched",value:function(e){this.state.fetched=e}}],[{key:"fetch",value:function(e){return(0,n.Z)(d().mark((function t(){var a,n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i.Z,t.next=3,f.getRentEstimator(e);case 3:if(t.t1=t.sent,a=(0,t.t0)(t.t1,2),n=a[0],!(r=a[1])){t.next=9;break}throw r;case 9:return t.abrupt("return",n.data);case 10:case"end":return t.stop()}}),t)})))()}}]),e}();(0,p.gn)([b.LO],A.prototype,"__dto",void 0),(0,p.gn)([b.LO],A.prototype,"infoWindowList",void 0),(0,p.gn)([b.LO],A.prototype,"state",void 0),(0,p.gn)([b.Fl,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[])],A.prototype,"dto",null),(0,p.gn)([b.Fl,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[])],A.prototype,"hydraData",null),(0,p.gn)([b.Fl,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[])],A.prototype,"boundaries",null),(0,p.gn)([b.Fl,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[])],A.prototype,"markers",null),(0,p.gn)([b.aD,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],A.prototype,"setMap",null),(0,p.gn)([b.aD,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],A.prototype,"setIw",null),(0,p.gn)([b.aD,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],A.prototype,"setIwList",null),(0,p.gn)([b.aD,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],A.prototype,"setDTO",null),(0,p.gn)([b.aD,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],A.prototype,"setFetched",null);var L=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,[{key:"getAnalytics",value:function(e){return h().post("/api/rent_estimator/analytics",e)}}]),e}();(0,p.gn)([(0,y.B)("RentEstimatorAnalytics:getAnalytics",[]),(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],L.prototype,"getAnalytics",null);var M=new L,J=a(68921),S=a(25987),z=a(71462);function O(e){var t=J.lC.value.get()<J.lC.enum.sm;try{var a=e.rentDistributionByPriceRange,n={legendData:[{label:(0,S.G)(a),style:{backgroundColor:"#6454C3",borderColor:"#6454C3"}}],chart:{type:"bar",data:{labels:a.labels.map((function(e){return z.J.RANGE_NAMED(e,"USD_INT")})),datasets:[{backgroundColor:"rgba(100, 84, 195, 0.1)",hoverBackgroundColor:"rgba(100, 84, 195, 0.6)",pointRadius:0,data:a.datasets[0].data,type:"bar",borderRadius:4}]},options:{interaction:{intersect:!1,mode:"index"},layout:{padding:{top:30}},aspectRatio:t?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(e){return z.J.PERCENT_INT(e)}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1,position:"nearest",external:function(e){var t=e.tooltip;0!==t.opacity&&t.dataPoints&&t.dataPoints[0]?n.__index=t.dataPoints[0].dataIndex+1:n.__index=n.__maxyears||1}},datalabels:{formatter:function(e){return e<.01?"< 1%":z.J.PERCENT_INT(e)},display:!0,align:"end",anchor:"end",color:"#222222",font:{weight:700},offset:20,padding:function(e){var t=(e.chart.getDatasetMeta(0).data[0].width-9*z.J.PERCENT_INT(e.dataset.data[e.dataIndex]).length)/2;return{bottom:5,top:-19,left:t,right:t}},borderWidth:2,borderRadius:8,backgroundColor:"rgba(100, 84, 195, 1)",borderColor:"rgba(100, 84, 195, 1)"}}}}};return n}catch(r){return null}}function V(e){var t=J.lC.value.get()<J.lC.enum.sm;try{var a=e.daysOnMarket,n=a.meta._details._state_name,r=a.meta._details._agg_type,o=a.labels.map((function(e){return new Date(e).getFullYear()})),l=new Set(o).size-1;return{chart:{type:"line",data:{labels:o,datasets:["state"!==r&&{label:"".concat((0,S.G)(a)," Trend"),borderColor:"#01D092",backgroundColor:"#01D092",pointRadius:0,data:a.datasets[0].data},{label:"".concat(n," Trend"),borderColor:"#6454C3",backgroundColor:"#6454C3",pointRadius:0,data:a.datasets[1].data}].filter(Boolean)},options:{interaction:{intersect:!1,mode:"index"},aspectRatio:t?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1},ticks:{maxTicksLimit:l,maxRotation:0,minRotation:0}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"}}},elements:{line:{tension:.4}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(e){return z.J.DATE_MONTH_YEAR(a.labels[e[0].dataIndex])}}},datalabels:{display:!1}}}}}}catch(i){return null}}function W(e){var t=J.lC.value.get()<J.lC.enum.sm;try{var a=e.medianRentPrice,n=a.meta._details._state_name,r=a.meta._details._agg_type,o=a.labels.map((function(e){return new Date(e).getFullYear()})),l=new Set(o).size-1;return{chart:{type:"combined",data:{labels:o,datasets:[{label:"".concat((0,S.G)(a)," Median"),borderColor:"rgba(100, 84, 195, 0.1)",backgroundColor:"rgba(100, 84, 195, 0.1)",hoverBackgroundColor:"rgba(100, 84, 195, 0.6)",pointRadius:0,data:a.datasets[0].data,type:"bar",borderRadius:4},"state"!==r&&{label:(0,S.G)(a),borderColor:"#01D092",backgroundColor:"#01D092",pointRadius:0,data:a.datasets[1].data},{label:"".concat(n," Trend"),borderColor:"#6454C3",backgroundColor:"#6454C3",pointRadius:0,data:a.datasets[2].data}].filter(Boolean)},options:{interaction:{intersect:!1,mode:"index"},aspectRatio:t?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1},ticks:{maxTicksLimit:l,maxRotation:0,minRotation:0}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(e){return z.J.USD_K(e)}}}},elements:{line:{tension:.4}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(e){return z.J.DATE_MONTH_YEAR(a.labels[e[0].dataIndex])},label:function(e){return"".concat(e.dataset.label,": ").concat(z.J.USD_INT(e.raw))}}},datalabels:{display:!1}}}}}}catch(i){return null}}var G=a(29815),U=a(36740);function Y(e){var t=J.lC.value.get()<J.lC.enum.sm;try{var a,n,r=e.yearlyAppreciationRate,o=z.J.NUMBER((a=Math).min.apply(a,(0,G.Z)(r.datasets[0].data))),l=z.J.NUMBER((n=Math).max.apply(n,(0,G.Z)(r.datasets[0].data)));return{legendData:[{label:(0,S.G)(r),style:{backgroundColor:"#666666",borderColor:"#666666"}},{label:"High Appreciation",style:{backgroundColor:"#00BA82",borderColor:"#00BA82",borderRadius:"2px"}},{label:"Medium Appreciation",style:{backgroundColor:"#FECB48",borderColor:"#FECB48",borderRadius:"2px"}},{label:"Low Appreciation",style:{backgroundColor:"#F44336",borderColor:"#F44336",borderRadius:"2px"}}],chart:{type:"line",data:{labels:r.labels,datasets:[{borderColor:"#666666",pointRadius:0,data:r.datasets[0].data}]},options:{interaction:{intersect:!1,mode:"index"},aspectRatio:t?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(e){return z.J.PERCENT_INT(e)}}}},backgrounds:(0,U.F)(o,l),elements:{line:{tension:.4}},plugins:{legend:{display:!1},tooltip:{callbacks:{labelColor:function(e){var t=function(e,t){return e<-.02?t:void 0}(e.raw,"#F44336")||function(e,t){return e>.02?t:void 0}(e.raw,"#00BA82")||function(e,t){return e<.02&&e>-.02?t:void 0}(e.raw,"#FECB48");return{borderColor:t,backgroundColor:t,borderWidth:1}},label:function(e){var t;return e.raw>.02?t="High":e.raw<-.02?t="Low":e.raw<2&&e.raw>-.02&&(t="Medium"),"".concat(t," Appreciation: ").concat(z.J.PERCENT_INT(e.raw))}}},datalabels:{display:!1}}}}}}catch(i){return null}}function j(e,t){var a=J.lC.value.get()<J.lC.enum.sm;try{var n=e.rentTrendsByBedroomCount,r=n.labels.map((function(e){return new Date(e).getFullYear()})),o=new Set(r).size-1;return{chart:{type:"line",data:{labels:r,datasets:[{borderColor:"#01D092",backgroundColor:"#01D092",pointRadius:0,data:n.datasets[t.rawValue.$id].data}]},options:{spanGaps:!0,interaction:{intersect:!1,mode:"index"},aspectRatio:a?1:3,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1},ticks:{maxTicksLimit:o,maxRotation:0,minRotation:0}},y:{position:"left",min:0,grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(e){return z.J.USD_K(e)}}}},elements:{line:{tension:.4}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(e){return z.J.DATE_MONTH_YEAR(n.labels[e[0].dataIndex])},label:function(e){return z.J.USD_INT(e.raw)}}},datalabels:{display:!1}}}}}}catch(l){return null}}function H(e,t){var a=J.lC.value.get()<J.lC.enum.sm;try{var n=e.homesRentedByBedroomCount,r=["Studio","1 beds","2 beds","3 beds","4 beds","5+ beds"],o=[],l=[],i=[],s=[],d=[{label:"Subject Property",style:{backgroundColor:"#01D092",borderColor:"#01D092"}},{label:(0,S.G)(n),style:{backgroundColor:"#6454C3",borderColor:"#6454C3"}}];if("any"===t)o.push("rgba(100, 84, 195, 0.1)"),l.push("rgba(100, 84, 195, 0.6)"),i.push("rgba(100, 84, 195, 1)"),s.push("rgba(100, 84, 195, 1)"),d.splice(0,1);else{for(var u=n.labels.length,c=0;c<n.labels.length;c++)t===n.labels[c]&&(u=c);for(var p=0;p<n.labels.length;p++)u===p?(o.push("rgba(0, 186, 130, 0.2)"),l.push("rgba(0, 186, 130, 0.6)"),i.push("rgba(0, 186, 130, 0.6)"),s.push("rgba(0, 186, 130, 0.6)")):(o.push("rgba(100, 84, 195, 0.1)"),l.push("rgba(100, 84, 195, 0.6)"),i.push("rgba(100, 84, 195, 1)"),s.push("rgba(100, 84, 195, 1)"))}var b={legendData:d,chart:{type:"bar",data:{labels:n.labels.map((function(e){return r[e]})),datasets:[{backgroundColor:o,hoverBackgroundColor:l,pointRadius:0,data:n.datasets[0].data,type:"bar",borderRadius:4}]},options:{interaction:{intersect:!1,mode:"index"},layout:{padding:{top:30}},aspectRatio:a?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},stacked:!0,ticks:{callback:function(e){return z.J.PERCENT_INT(e)}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1,position:"nearest",external:function(e){var t=e.tooltip;0!==t.opacity&&t.dataPoints&&t.dataPoints[0]?b.__index=t.dataPoints[0].dataIndex+1:b.__index=b.__maxyears||1}},datalabels:{formatter:function(e){return e<.01?"< 1%":z.J.PERCENT_INT(e)},display:!0,align:"end",anchor:"end",color:"#222222",font:{weight:700},offset:20,padding:function(e){var t=(e.chart.getDatasetMeta(0).data[0].width-9*z.J.PERCENT_INT(e.dataset.data[e.dataIndex]).length)/2;return{bottom:5,top:-19,left:t,right:t}},borderWidth:2,borderRadius:8,backgroundColor:s,borderColor:i}}}}};return b}catch(g){return null}}function q(e,t){var a=J.lC.value.get()<J.lC.enum.sm;try{var n=e.medianRentPriceByBedroomCount,r=["Studio","1 beds","2 beds","3 beds","4 beds","5+ beds"],o=[],l=[],i=[],s=[],d=[{label:"Subject Property",style:{backgroundColor:"#01D092",borderColor:"#01D092"}},{label:(0,S.G)(n),style:{backgroundColor:"#6454C3",borderColor:"#6454C3"}}];if("any"===t)o.push("rgba(100, 84, 195, 0.1)"),l.push("rgba(100, 84, 195, 0.6)"),i.push("rgba(100, 84, 195, 1)"),s.push("rgba(100, 84, 195, 1)"),d.splice(0,1);else{for(var u=n.labels.length,c=0;c<n.labels.length;c++)t===n.labels[c]&&(u=c);for(var p=0;p<n.labels.length;p++)u===p?(o.push("rgba(0, 186, 130, 0.2)"),l.push("rgba(0, 186, 130, 0.6)"),i.push("rgba(0, 186, 130, 0.6)"),s.push("rgba(0, 186, 130, 0.6)")):(o.push("rgba(100, 84, 195, 0.1)"),l.push("rgba(100, 84, 195, 0.6)"),i.push("rgba(100, 84, 195, 1)"),s.push("rgba(100, 84, 195, 1)"))}var b={legendData:d,chart:{type:"bar",data:{labels:n.labels.map((function(e){return r[e]})),datasets:[{backgroundColor:o,hoverBackgroundColor:l,pointRadius:0,data:n.datasets[0].data,type:"bar",borderRadius:4}]},options:{interaction:{intersect:!1,mode:"index"},layout:{padding:{top:30}},aspectRatio:a?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},stacked:!0,ticks:{callback:function(e){return z.J.USD_K(e)}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1,position:"nearest",external:function(e){var t=e.tooltip;0!==t.opacity&&t.dataPoints&&t.dataPoints[0]?b.__index=t.dataPoints[0].dataIndex+1:b.__index=b.__maxyears||1}},datalabels:{formatter:function(e){return z.J.USD_INT(e)},display:!0,align:"end",anchor:"end",color:"#222222",font:{weight:700},offset:20,padding:function(e){var t=(e.chart.getDatasetMeta(0).data[0].width-9*z.J.USD_INT(e.dataset.data[e.dataIndex]).length)/2;return{bottom:5,top:-19,left:t,right:t}},borderWidth:2,borderRadius:8,backgroundColor:s,borderColor:i}}}}};return b}catch(g){return null}}function K(e,t){var a=J.lC.value.get()<J.lC.enum.sm;try{var n=e.homesRentedByBathroomCount,r=[],o=[],l=[],i=[],s=[{label:"Subject Property",style:{backgroundColor:"#01D092",borderColor:"#01D092"}},{label:(0,S.G)(n),style:{backgroundColor:"#6454C3",borderColor:"#6454C3"}}];if("any"===t)r.push("rgba(100, 84, 195, 0.1)"),o.push("rgba(100, 84, 195, 0.6)"),l.push("rgba(100, 84, 195, 1)"),i.push("rgba(100, 84, 195, 1)"),s.splice(0,1);else{for(var d=n.labels.length,u=0;u<n.labels.length;u++)t===n.labels[u]&&(d=u);for(var c=0;c<n.labels.length;c++)d===c?(r.push("rgba(0, 186, 130, 0.2)"),o.push("rgba(0, 186, 130, 0.6)"),l.push("rgba(0, 186, 130, 0.6)"),i.push("rgba(0, 186, 130, 0.6)")):(r.push("rgba(100, 84, 195, 0.1)"),o.push("rgba(100, 84, 195, 0.6)"),l.push("rgba(100, 84, 195, 1)"),i.push("rgba(100, 84, 195, 1)"))}return{legendData:s,chart:{type:"bar",data:{labels:n.labels.map((function(e){return 1===e?"".concat(e," bath"):"".concat(e).concat(4===e?"+":""," baths")})),datasets:[{backgroundColor:r,hoverBackgroundColor:o,pointRadius:0,data:n.datasets[0].data,type:"bar",borderRadius:4}]},options:{interaction:{intersect:!1,mode:"index"},layout:{padding:{top:30}},aspectRatio:a?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(e){return z.J.PERCENT_INT(e)}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},datalabels:{formatter:function(e){return e<.01?"< 1%":z.J.PERCENT_INT(e)},display:!0,align:"end",anchor:"end",color:"#222222",font:{weight:700},offset:20,padding:function(e){var t=(e.chart.getDatasetMeta(0).data[0].width-9*z.J.PERCENT_INT(e.dataset.data[e.dataIndex]).length)/2;return{bottom:5,top:-19,left:t,right:t}},borderWidth:2,borderRadius:8,backgroundColor:i,borderColor:l}}}}}}catch(p){return null}}function $(e,t){var a=J.lC.value.get()<J.lC.enum.sm;try{var n=e.homesRentedBySize,r=[],o=[],l=[],i=[],s=[{label:"Subject Property",style:{backgroundColor:"#01D092",borderColor:"#01D092"}},{label:(0,S.G)(n),style:{backgroundColor:"#6454C3",borderColor:"#6454C3"}}];if(0===t||""===t)r.push("rgba(100, 84, 195, 0.1)"),o.push("rgba(100, 84, 195, 0.6)"),l.push("rgba(100, 84, 195, 1)"),i.push("rgba(100, 84, 195, 1)"),s.splice(0,1);else{for(var d=n.labels.length,u=0;u<n.labels.length;u++)t>n.labels[u].min&&t<n.labels[u].max&&(d=u);for(var c=0;c<n.labels.length;c++)d===c?(r.push("rgba(0, 186, 130, 0.2)"),o.push("rgba(0, 186, 130, 0.6)"),l.push("rgba(0, 186, 130, 0.6)"),i.push("rgba(0, 186, 130, 0.6)")):(r.push("rgba(100, 84, 195, 0.1)"),o.push("rgba(100, 84, 195, 0.6)"),l.push("rgba(100, 84, 195, 1)"),i.push("rgba(100, 84, 195, 1)"))}var p={legendData:s,chart:{type:"bar",data:{labels:n.labels.map((function(e){return z.J.RANGE(e,(function(e){return"".concat(z.J.NUMBER(e)," ft\xb2")}))})),datasets:[{backgroundColor:r,hoverBackgroundColor:o,pointRadius:0,data:n.datasets[0].data,type:"bar",borderRadius:4}]},options:{interaction:{intersect:!1,mode:"index"},layout:{padding:{top:30}},aspectRatio:a?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(e){return z.J.PERCENT_INT(e)}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1,position:"nearest",external:function(e){var t=e.tooltip;0!==t.opacity&&t.dataPoints&&t.dataPoints[0]?p.__index=t.dataPoints[0].dataIndex+1:p.__index=p.__maxyears||1}},datalabels:{formatter:function(e){return e<.01?"< 1%":z.J.PERCENT_INT(e)},display:!0,align:"end",anchor:"end",color:"#222222",font:{weight:700},offset:20,padding:function(e){var t=(e.chart.getDatasetMeta(0).data[0].width-9*z.J.PERCENT_INT(e.dataset.data[e.dataIndex]).length)/2;return{bottom:5,top:-19,left:t,right:t}},borderWidth:2,borderRadius:8,backgroundColor:i,borderColor:l}}}}};return p}catch(b){return null}}function Q(e){var t=J.lC.value.get()<J.lC.enum.sm;try{var a=e.homesRentedByYearBuilt;return{legendData:[{label:(0,S.G)(a),style:{backgroundColor:"#6454C3",borderColor:"#6454C3"}}],chart:{type:"bar",data:{labels:a.labels.map((function(e,t){return 0===t?"< ".concat(e.max):t+1===a.labels.length?"> ".concat(e.min):"".concat(e.min," - ").concat(e.max)})),datasets:[{backgroundColor:"rgba(100, 84, 195, 0.1)",hoverBackgroundColor:"rgba(100, 84, 195, 0.6)",pointRadius:0,data:a.datasets[0].data,type:"bar",borderRadius:4}]},options:{interaction:{intersect:!1,mode:"index"},layout:{padding:{top:30}},aspectRatio:t?1:2,scales:{x:{grid:{display:!1,drawBorder:!1,drawTicks:!1}},y:{position:"left",grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.02)"},ticks:{callback:function(e){return z.J.PERCENT_INT(e)}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},datalabels:{formatter:function(e){return e<.01?"< 1%":z.J.PERCENT_INT(e)},display:!0,align:"end",anchor:"end",color:"#222222",font:{weight:700},offset:20,padding:function(e){var t=(e.chart.getDatasetMeta(0).data[0].width-9*z.J.PERCENT_INT(e.dataset.data[e.dataIndex]).length)/2;return{bottom:5,top:-19,left:t,right:t}},borderWidth:2,borderRadius:8,backgroundColor:"rgba(100, 84, 195, 1)",borderColor:"rgba(100, 84, 195, 1)"}}}}}}catch(n){return null}}function X(e,t,a){try{var n={rentDistributionByPriceRange:e.homes_sold_by_price_range,daysOnMarket:e.days_on_market,medianRentPrice:e.median_home_price,yearlyAppreciationRate:e.yearly_appreciation_rate,rentTrendsByBedroomCount:e.rent_trends_by_bedroom_count,homesRentedByBedroomCount:e.homes_sold_by_bedroom_count,medianRentPriceByBedroomCount:e.rented_price_by_bedroom_count,homesRentedByBathroomCount:e.homes_sold_by_bathroom_count,homesRentedBySize:e.homes_sold_by_size,homesRentedByYearBuilt:e.year_built,popularAmenities:e.popular_amenities,charts:void 0};return n.charts=function(e,t,a){return{rentDistributionByPriceRange:O(e),daysOnMarket:V(e),medianRentPrice:W(e),yearlyAppreciationRate:Y(e),rentTrendsByBedroomCount:j(e,a.Analytics.rentChartControl),homesRentedByBedroomCount:H(e,t.beds),medianRentPriceByBedroomCount:q(e,t.beds),homesRentedByBathroomCount:K(e,t.baths),homesRentedBySize:$(e,t.building_size),homesRentedByYearBuilt:Q(e)}}(n,t,a),n}catch(r){return null}}var ee=["homes_sold_by_price_range","days_on_market","median_home_price","yearly_appreciation_rate","rent_trends_by_bedroom_count","homes_sold_by_bedroom_count","rented_price_by_bedroom_count","homes_sold_by_bathroom_count","homes_sold_by_size","year_built","popular_amenities"],te=[{value:"Studio"},{value:"1 Bedroom",mobileLabel:1},{value:"2 Bedroom",mobileLabel:2},{value:"3 Bedroom",mobileLabel:3},{value:"4 Bedroom",mobileLabel:4},{value:"5+ Bedroom",mobileLabel:"5+"}],ae=[{value:"Studio"},{value:1},{value:2},{value:3},{value:4},{value:"5+"}],ne=function(){function e(t){(0,r.Z)(this,e),(0,l.Z)(this,"__dto",null),(0,l.Z)(this,"fetched",!1),(0,l.Z)(this,"snapshot",null),(0,l.Z)(this,"rentChartControl",null),(0,l.Z)(this,"RentEstimator",null),(0,b.rC)(this),this.RentEstimator=t}return(0,o.Z)(e,[{key:"init",value:function(){return(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"getAnalytics",value:function(t){var a=this;return(0,n.Z)(d().mark((function n(){var r,o,l;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,_.Z)((0,v.Z)({},t),{graph_names:ee,agg_type:"street_address"===t.agg_type?"zip":t.agg_type}),a.snapshot=I(a.RentEstimator.Basis.formModel),a.setFetched(!1),n.next=5,e.fetch(r);case 5:o=n.sent,a.setDTO(o),l=6===o.rent_trends_by_bedroom_count.datasets.length?ae:te,a.rentChartControl=a.createChartModel(o.rent_trends_by_bedroom_count.datasets,l,"rent-trend-by-bedroom-count"),a.setFetched(!0);case 10:case"end":return n.stop()}}),n)})))()}},{key:"createChartModel",value:function(e,t,a){var n=this.RentEstimator.Basis.formModel.controls.beds.internalValue.value,r=n>5?5:n;return new w.f(a,{enum:e.map((function(e){return t[parseInt(e.name,10)]})),initialEnumIndex:function(){var t=e.findIndex((function(e){return parseInt(e.name,10)===r}));return t<0?0:t}(),defaultEnumIndex:0,disabled:!1,type:"radio"})}},{key:"dto",get:function(){return null===this.__dto?null:X(this.__dto,this.snapshot,this.RentEstimator)}},{key:"setDTO",value:function(e){this.__dto=e}},{key:"setFetched",value:function(e){this.fetched=e}}],[{key:"fetch",value:function(e){return(0,n.Z)(d().mark((function t(){var a,n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i.Z,t.next=3,M.getAnalytics(e);case 3:if(t.t1=t.sent,a=(0,t.t0)(t.t1,2),n=a[0],!(r=a[1])){t.next=9;break}throw r;case 9:return t.abrupt("return",n.data);case 10:case"end":return t.stop()}}),t)})))()}}]),e}();(0,p.gn)([b.LO],ne.prototype,"__dto",void 0),(0,p.gn)([b.LO],ne.prototype,"fetched",void 0),(0,p.gn)([b.Fl,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[])],ne.prototype,"dto",null),(0,p.gn)([b.aD,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],ne.prototype,"setDTO",null),(0,p.gn)([b.aD,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[void 0])],ne.prototype,"setFetched",null);var re=function(){function e(t){(0,r.Z)(this,e),(0,l.Z)(this,"__inited",!1),(0,l.Z)(this,"Basis",new A(this)),(0,l.Z)(this,"Analytics",new ne(this)),void 0!==t&&this.Basis.getRentEstimator(t)}return(0,o.Z)(e,[{key:"init",value:function(e){this.__inited||(this.__inited=!0,this.Basis.init(null===e||void 0===e?void 0:e.Basis),this.Analytics.init(null===e||void 0===e?void 0:e.Analytics))}},{key:"analyze",value:function(){var e=this;return(0,n.Z)(d().mark((function t(){var a,n,r,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.Analytics.setFetched(!1),t.t0=i.Z,t.next=4,(0,c.of)(e.Basis.getRentEstimator());case 4:if(t.t1=t.sent,a=(0,t.t0)(t.t1,2),!(n=a[1])){t.next=9;break}throw n;case 9:return r={agg_type:e.Basis.dto.address.aggType,city:e.Basis.dto.address.city,county:e.Basis.dto.address.county,state:e.Basis.dto.address.stateCode,zip:e.Basis.dto.address.zip,prop_type2:e.Basis.formModel.controls.propType.internalValue.value},t.t2=i.Z,t.next=13,(0,c.of)(e.Analytics.getAnalytics(r));case 13:if(t.t3=t.sent,o=(0,t.t2)(t.t3,2),!o[1]){t.next=18;break}return t.abrupt("return",console.log("Not found!"));case 18:case"end":return t.stop()}}),t)})))()}}]),e}(),oe=(0,u.createContext)(null);function le(){return(0,u.useContext)(oe)}function ie(e){return new re(e)}}}]);